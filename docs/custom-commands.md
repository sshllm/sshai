# 自定义命令功能

## 概述

SSHAI 现在支持在交互式终端中使用自定义命令，这些命令以 `/` 开头，并支持 Tab 键自动补全。

## 可用命令

### `/help`
显示所有可用的自定义命令和使用说明。

**用法：**
```
/help
```

### `/new`
清空当前对话上下文，开始新的会话。这将清除所有历史消息记录。

**用法：**
```
/new
```

### `/history`
查看当前对话的历史记录，包括：
- 消息时间戳
- 消息角色（用户、助手、系统）
- 消息内容

**用法：**
```
/history
```

### `/clear`
清空终端屏幕显示，但不影响对话历史记录。

**用法：**
```
/clear
```

### `/model`
切换当前对话使用的AI模型。会显示可用模型列表供用户选择。

**用法：**
```
/model
```

## 功能特性

### Tab 自动补全
- 输入 `/` 后按 Tab 键可以看到所有可用命令
- 输入命令前缀（如 `/h`）后按 Tab 键可以补全匹配的命令
- 支持多个匹配项的循环补全

### 对话历史管理
- 所有对话消息都会自动记录时间戳
- 支持查看完整的对话历史
- 可以随时清空上下文开始新会话
- 历史记录仅保存在内存中，程序退出后会清除

### 多语言支持
- 所有命令和提示信息都支持国际化
- 当前支持中文界面

## 使用示例

```bash
# 查看帮助
/help

# 查看对话历史
/history

# 清空屏幕
/clear

# 切换模型
/model

# 开始新会话
/new
```

## 技术实现

### 核心组件

1. **ConversationHistory**: 管理对话历史记录
2. **CustomCommand**: 定义自定义命令结构
3. **Tab补全**: 基于输入前缀匹配可用命令
4. **国际化**: 支持多语言界面

### 代码结构

- `pkg/ssh/session.go`: 主要实现文件
- `lang/lang-zh-cn.yaml`: 中文语言包
- `pkg/ssh/session_test.go`: 单元测试

### 测试覆盖

项目包含完整的单元测试，覆盖：
- 对话历史管理
- 命令匹配和补全
- 时间戳记录
- 消息存储和检索

运行测试：
```bash
go test ./pkg/ssh/ -v