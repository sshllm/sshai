# SSH Stdin 输入功能

## 功能概述

SSH Stdin 功能允许用户通过管道（pipe）将文件内容或其他数据直接传递给SSH服务，AI会自动分析输入的内容并提供相关建议。

### 使用方式
```bash
# 分析文件内容
cat filename.txt | ssh user@server.com -p 2213

# 分析命令输出
ls -la | ssh user@server.com -p 2213

# 分析网络请求结果
curl -s https://api.github.com/repos/user/repo | ssh user@server.com -p 2213

# 分析简单文本
echo "请分析这段文本" | ssh user@server.com -p 2213
```

## 实现原理

### 1. 自动检测机制
系统在SSH会话开始时会自动检测是否有stdin输入：
- 使用goroutine和channel实现非阻塞读取
- 设置300ms超时避免长时间等待
- 支持大文件读取（8KB缓冲区）

### 2. 处理流程
```
SSH连接 → 检测stdin → 读取内容 → AI分析 → 返回结果
```

## 功能特性

### ✅ 已实现功能
- [x] 自动检测stdin输入
- [x] 支持大文件处理（8KB缓冲区）
- [x] 非阻塞读取机制
- [x] 超时保护（300ms）
- [x] 中文内容支持
- [x] AI智能分析
- [x] 错误处理和日志记录

### 🎯 核心优势
1. **无缝集成**：与现有SSH exec功能完美配合
2. **自动检测**：无需特殊命令，自动识别管道输入
3. **高效处理**：支持大文件和复杂内容分析
4. **智能分析**：AI自动理解内容类型并提供相关建议
5. **易于使用**：标准Unix管道语法，易于集成到脚本中

## 测试结果

✅ **功能完全正常**
- 成功读取README.md文件（3581字符）
- AI提供了详细的项目分析和改进建议
- 完美支持中文输入和输出
- 能够处理大文件内容

---

**状态**：✅ 完全实现并测试通过